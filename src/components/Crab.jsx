import React, {useState , useEffect} from 'react'

const randInt = (min, max) => Math.random() * (max - min) + min;

const Crab = React.memo(({ className, size, svgWidth, svgHeight , speed = 0.5 }) => {
    const [position, setPosition] = useState({ x: 0, y: 0 });
    const [targetPosition, setTargetPosition] = useState({ x: 0, y: 0 });
    //const speed = 0.5
  
    const getRandomPosition = () => ({
      x: randInt(0,90),
      y: randInt(7,-2)
    });
  
    useEffect(() => {
      const interval = setInterval(() => {
        setTargetPosition(getRandomPosition());
      }, 500); 
  
      return () => clearInterval(interval);
    }, [svgWidth, svgHeight]);
  
    useEffect(() => {
      const step = () => {
        const deltaX = targetPosition.x - position.x;
        const deltaY = targetPosition.y - position.y;
        const distance = Math.sqrt(deltaX * deltaX + deltaY * deltaY);
  
        if (distance > 1) {
          setPosition({
            x: position.x + (deltaX / distance) * speed,
            y: position.y + (deltaY / distance) * speed,
          });
        } else {
          setPosition(targetPosition);
        }
      };
  
      const animationFrame = requestAnimationFrame(step);
  
      return () => cancelAnimationFrame(animationFrame);
    }, [position, targetPosition]);
  

  return (
    <svg  className={className}    
      x={position.x}
      y={position.y}

      width={size} height={size} viewBox="0 0 883 852" fill="none" xmlns="http://www.w3.org/2000/svg">

    <path d="M318.162 358.986L309.088 414.81L341.58 413.321L333.748 360.518L318.162 358.986Z" fill="#FF6F27"/>
    <path d="M326.285 318.545C318.031 317.924 310.088 319.813 304.143 323.809C298.198 327.805 294.72 333.594 294.447 339.947C294.174 346.3 297.128 352.716 302.681 357.833C308.235 362.95 315.95 366.364 324.189 367.35C332.444 367.971 340.387 366.083 346.332 362.087C352.277 358.09 355.755 352.301 356.028 345.948C356.3 339.595 353.347 333.179 347.793 328.063C342.24 322.946 334.524 319.531 326.285 318.545Z" fill="#263238"/>
    <path d="M319.86 327.387C319.976 327.203 320.031 326.997 320.02 326.784C320.008 326.571 319.931 326.359 319.794 326.165C319.656 325.972 319.463 325.802 319.232 325.671C319 325.541 318.736 325.453 318.463 325.415C314.67 325.555 311.167 326.69 308.519 328.637C305.871 330.585 304.232 333.231 303.866 336.15C302.918 341.566 304.437 351.799 312.63 353.765C313.397 353.945 314.196 353.908 314.88 353.661C315.564 353.414 316.086 352.974 316.349 352.422C317.894 348.573 314.052 343.648 314.267 339.432C314.832 335.041 316.749 330.913 319.86 327.387Z" fill="white"/>
    <path d="M492.253 362.745L508.108 419.477L475.335 415.602L476.858 363.107L492.253 362.745Z" fill="#FF6F27"/>
    <path d="M479.91 321.778C487.982 321.939 495.957 324.492 502.203 328.913C508.448 333.334 512.493 339.29 513.509 345.563C514.525 351.835 512.437 357.95 507.67 362.657C502.904 367.363 495.82 370.306 487.867 370.882C479.795 370.721 471.82 368.168 465.574 363.747C459.329 359.326 455.284 353.37 454.268 347.097C453.251 340.825 455.34 334.71 460.107 330.003C464.873 325.297 471.957 322.354 479.91 321.778Z" fill="#263238"/>
    <path d="M479.076 326.55C475.153 326.054 471.241 326.509 467.883 327.85C464.526 329.192 461.891 331.354 460.343 334.036C458.201 336.816 457.285 340.125 457.722 343.508C458.159 346.892 459.927 350.185 462.784 352.936C465.804 355.591 470.054 354.208 470.471 350.826C470.289 346.394 471.051 342.037 472.728 337.931C474.782 334.818 477.276 331.914 480.169 329.266C480.421 329.078 480.596 328.837 480.678 328.567C480.759 328.297 480.743 328.008 480.631 327.731C480.52 327.453 480.317 327.197 480.043 326.99C479.77 326.782 479.436 326.63 479.076 326.55Z" fill="white"/>
    <path d="M170.571 297.403C170.571 297.403 66.9987 391.441 98.3044 452.472C129.61 513.503 228.933 520.389 228.933 520.389L217.26 556.222C217.26 556.222 87.9046 536.77 63.4548 460.459C39.005 384.149 162.041 289.397 162.041 289.397L170.571 297.403Z" fill="#FF6F27"/>
    <path d="M229.925 228.052L282.058 94.4435C282.058 94.4435 157.989 75.6512 113.006 139.543C68.0227 203.435 106.234 277.769 165.42 301.95C224.605 326.131 333.589 322.614 356.207 230.221L229.925 228.052Z" fill="#FF6F27"/>
    <path d="M661.345 294.528C661.345 294.528 769.988 400.46 741.945 458.148C713.903 515.835 614.297 511.557 614.297 511.557L627.824 548.745C627.824 548.745 756.723 543.929 777.297 470.183C797.871 396.437 669.912 287.389 669.912 287.389L661.345 294.528Z" fill="#FF6F27"/>
    <path d="M597.878 218.166L538.742 78.2387C538.742 78.2387 661.589 73.1613 710.564 142.734C759.539 212.307 724.338 282.031 665.695 299.542C607.052 317.054 498.151 301.182 470.561 205.981L597.878 218.166Z" fill="#FF6F27"/>
    <path d="M188.988 578.385C160.465 567.147 101.869 578.42 77.3301 594.193C65.2016 601.771 76.9641 616.19 92.6978 613.893C113.458 610.749 142.856 590.113 190.879 587.488C196.345 587.115 193.709 580.275 188.988 578.385Z" fill="#FF6F27"/>
    <path d="M192.176 631.837C161.578 626.482 111.623 651.095 93.8449 672.038C92.0786 674.171 91.4029 676.791 91.9363 679.436C92.4698 682.082 94.1785 684.582 96.7608 686.497C99.343 688.411 102.633 689.616 106.049 689.899C109.466 690.182 112.791 689.525 115.435 688.044C134.168 680.558 153.368 653.485 197.313 640.311C202.284 638.789 197.101 632.566 192.176 631.837Z" fill="#FF6F27"/>
    <path d="M231.558 670.626C201.319 673.174 164.942 708.803 156.776 733.555C155.899 736.088 156.258 738.866 157.787 741.385C159.316 743.904 161.914 745.996 165.109 747.28C168.303 748.563 171.881 748.953 175.192 748.379C178.502 747.805 181.325 746.304 183.146 744.151C196.718 732.306 204.423 701.228 239.547 677.739C243.852 675.037 236.517 670.165 231.558 670.626Z" fill="#FF6F27"/>
    <path d="M656.327 596.926C680.978 584.496 742.151 593.343 772.013 607.872C774.964 609.361 777.243 611.558 778.457 614.083C779.672 616.608 779.745 619.302 778.664 621.699C777.583 624.096 775.416 626.046 772.537 627.21C769.659 628.373 766.251 628.679 762.902 628.073C741.332 625.892 705.7 606.498 657.182 605.98C651.614 605.936 652.303 599.013 656.327 596.926Z" fill="#FF6F27"/>
    <path d="M669.658 650.16C698.623 643.933 755.42 665.836 779.612 685.885C781.989 687.932 783.436 690.497 783.702 693.133C783.968 695.769 783.036 698.307 781.067 700.305C779.099 702.303 776.22 703.634 772.934 704.064C769.647 704.495 766.162 703.999 763.086 702.662C742.835 695.927 714.79 670.02 667.018 659.267C661.767 657.417 664.969 651.067 669.658 650.16Z" fill="#FF6F27"/>
    <path d="M641.912 690.223C672.871 691.522 719.927 725.275 736.049 749.626C743.733 761.47 726.431 769.738 713.269 761.321C695.882 750.171 678.77 719.533 637.278 697.784C631.801 695.231 637.404 690.098 641.912 690.223Z" fill="#FF6F27"/>
    <path d="M250.099 419.37C179.299 472.496 148.222 638.098 214.229 696.963C280.236 755.829 593.131 756.905 652.245 699.873C711.359 642.84 654.55 479.663 561.427 422.431C500.295 384.486 299.573 382.578 250.099 419.37Z" fill="#FF6F27"/>
    </svg>
  )
});
export default Crab;